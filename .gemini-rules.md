# Gemini Project Rules for Polling App

This document outlines the rules and conventions for the AI assistant to follow when working on this Next.js Polling App.

## 1. Folder Structure

- **Components:** All reusable React components should be placed in `app/components/`.
    - UI components (like buttons, inputs, cards) go into `app/components/ui/`.
    - Form components are located in `app/components/forms/`.
    - Feature-specific components (e.g., for polls) go into `app/components/polls/`.
- **Routes:** The app uses the Next.js App Router. All pages should be within the `app/` directory.
    - Authentication-related pages (`login`, `register`) are grouped under `app/(auth)/`.
    - The main dashboard is located at `app/(dashboard)/dashboard/`.
    - Poll-related pages are under `app/polls/`.
- **Business Logic:**
    - Supabase client and utility functions are in `app/lib/supabase/`.
    - General utility functions are in `app/lib/utils.ts`.
    - Custom hooks are to be placed in `app/hooks/`.
- **API Routes:** All server-side API endpoints must be created within the `app/api/` directory.

## 2. UI and Styling

- **Component Library:** This project uses `shadcn/ui`. All new UI components (Buttons, Cards, Inputs, etc.) **must** be imported from `@/app/components/ui/` and should follow the existing style and usage patterns.
- **Styling:** Global styles are defined in `app/globals.css`. Use Tailwind CSS utility classes for styling components. Do not write custom CSS files unless absolutely necessary.

## 3. Supabase Integration

- **Client:** Always use the Supabase client from `app/lib/supabase/client.ts` for any interaction with Supabase on the client-side. For server-side operations, create a new server client as demonstrated in the middleware.
- **Authentication:** User authentication is handled by Supabase Auth. All authentication logic (sign-in, sign-up, sign-out) must use the Supabase client.
- **Database:** When interacting with the database (e.g., fetching or creating polls), use the Supabase JavaScript client library.

## 4. State Management

- **Global State:** For global state management, such as the current user's session, use the React Context API. The `AuthContext` in `app/contexts/AuthContext.tsx` is the primary example of this. Avoid introducing other state management libraries like Redux or Zustand without explicit instruction.
- **Local State:** For component-level state, use the `useState` and `useReducer` hooks from React.

## 5. Forms

- **Form Handling:** For creating new forms, use standard React component state (`useState`) to manage form inputs.
- **Validation:** Perform basic client-side validation within the form component. For more complex scenarios, we can discuss adding a dedicated validation library.
- **Submission:** Form submission handlers should be clearly named (e.g., `handleSubmit`, `handleLogin`) and should contain the logic for interacting with Supabase or our API routes.
